<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Super MAGA Bros.</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            background: #0a0a2e;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            height: 100dvh;
            overflow: hidden;
            font-family: Arial, sans-serif;
            color: white;
            margin: 0;
            padding: 0;
            -webkit-touch-callout: none;
        }
        canvas {
            image-rendering: pixelated;
            image-rendering: crisp-edges;
            border: 3px solid #FFD700;
            border-radius: 4px;
            display: block;
            touch-action: none;
        }
        #loading-msg {
            text-align: center;
            position: absolute;
        }
        #loading-msg h2 { color: #FFD700; margin-bottom: 12px; }
        #loading-msg code { background: #222; padding: 4px 10px; border-radius: 4px; }

        /* Mobile: canvas fills the screen, controls overlay on top */
        @media (hover: none) and (pointer: coarse) {
            body {
                align-items: flex-start;
                justify-content: flex-start;
            }
            canvas {
                border: none !important;
                border-radius: 0 !important;
            }
        }
    </style>
</head>
<body>
    <div id="loading-msg">
        <h2>Loading Super MAGA Bros...</h2>
        <p>If this message doesn't disappear, serve the folder locally:</p>
        <p style="margin-top:8px"><code>npx serve .</code></p>
    </div>
    <script>
        window.addEventListener('error', function(e) {
            if (e.target && e.target.tagName === 'SCRIPT') {
                document.getElementById('loading-msg').innerHTML =
                    '<h2 style="color:#CC2222">Failed to load Phaser.js</h2>' +
                    '<p>Check your internet connection, or serve locally:</p>' +
                    '<p style="margin-top:8px"><code>npx serve .</code></p>';
            }
        }, true);
    </script>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.60.0/dist/phaser.min.js"></script>
    <script>
        // Hide loading message once Phaser is ready
        if (typeof Phaser !== 'undefined') {
            document.getElementById('loading-msg').style.display = 'none';
        }
    </script>
    <script src="game.js?v=20260226d"></script>

    <!-- Touch controls overlay (hidden on desktop) -->
    <div id="touch-controls" style="
        display: none;
        position: fixed;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 50%;
        pointer-events: none;
        z-index: 9999;
        user-select: none;
        -webkit-user-select: none;
    ">
      <!-- D-PAD: left side -->
      <div id="btn-left" style="
          position:absolute; left:16px; bottom:24px;
          width:72px; height:72px; border-radius:50%;
          background:rgba(255,255,255,0.25);
          border:3px solid rgba(255,255,255,0.5);
          display:flex; align-items:center; justify-content:center;
          font-size:30px; color:white; pointer-events:all;
          touch-action:none;
      ">&#9664;</div>

      <div id="btn-right" style="
          position:absolute; left:104px; bottom:24px;
          width:72px; height:72px; border-radius:50%;
          background:rgba(255,255,255,0.25);
          border:3px solid rgba(255,255,255,0.5);
          display:flex; align-items:center; justify-content:center;
          font-size:30px; color:white; pointer-events:all;
          touch-action:none;
      ">&#9654;</div>

      <!-- ACTION BUTTONS: right side -->
      <div id="btn-jump" style="
          position:absolute; right:16px; bottom:24px;
          width:84px; height:84px; border-radius:50%;
          background:rgba(255,50,50,0.4);
          border:3px solid rgba(255,100,100,0.7);
          display:flex; align-items:center; justify-content:center;
          font-size:14px; font-weight:bold; color:white;
          pointer-events:all; touch-action:none;
          font-family: Arial Black, sans-serif;
      ">JUMP</div>

      <div id="btn-tweet" style="
          position:absolute; right:116px; bottom:32px;
          width:72px; height:72px; border-radius:50%;
          background:rgba(29,161,242,0.4);
          border:3px solid rgba(29,161,242,0.7);
          display:flex; align-items:center; justify-content:center;
          font-size:11px; font-weight:bold; color:white;
          pointer-events:all; touch-action:none;
          font-family: Arial Black, sans-serif;
      ">TWEET</div>

      <div id="btn-shart" style="
          position:absolute; right:100px; bottom:112px;
          width:64px; height:64px; border-radius:50%;
          background:rgba(136,68,0,0.4);
          border:3px solid rgba(136,68,0,0.7);
          display:flex; align-items:center; justify-content:center;
          font-size:9px; font-weight:bold; color:white;
          pointer-events:all; touch-action:none;
          font-family: Arial Black, sans-serif;
      ">SHART</div>
    </div>

    <script>
    (function() {
        // Touch state flags â€” read by the game via window.TOUCH
        window.TOUCH = {
            left: false, right: false, jump: false, tweet: false, shart: false
        };

        // Show controls only on touch devices
        function initTouch() {
            var el = document.getElementById('touch-controls');
            if (!el) return;
            el.style.display = 'block';

            function bind(id, key) {
                var btn = document.getElementById(id);
                if (!btn) return;
                btn.addEventListener('touchstart', function(e) {
                    e.preventDefault();
                    window.TOUCH[key] = true;
                }, { passive: false });
                btn.addEventListener('touchend', function(e) {
                    e.preventDefault();
                    window.TOUCH[key] = false;
                }, { passive: false });
                btn.addEventListener('touchcancel', function(e) {
                    e.preventDefault();
                    window.TOUCH[key] = false;
                }, { passive: false });
            }

            bind('btn-left',  'left');
            bind('btn-right', 'right');
            bind('btn-jump',  'jump');
            bind('btn-tweet', 'tweet');
            bind('btn-shart', 'shart');
        }

        // Init immediately if touch is detected, or on first touch
        if ('ontouchstart' in window || navigator.maxTouchPoints > 0) {
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', initTouch);
            } else {
                initTouch();
            }
        }
    })();
    </script>
</body>
</html>
