<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Super MAGA Bros.</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            background: #0a0a2e;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            height: 100dvh;
            overflow: hidden;
            font-family: Arial, sans-serif;
            color: white;
            margin: 0;
            padding: 0;
            -webkit-touch-callout: none;
        }
        canvas {
            image-rendering: pixelated;
            image-rendering: crisp-edges;
            border: 3px solid #FFD700;
            border-radius: 4px;
            display: block;
            touch-action: none;
        }
        #loading-msg {
            text-align: center;
            position: absolute;
        }
        #loading-msg h2 { color: #FFD700; margin-bottom: 12px; }
        #loading-msg code { background: #222; padding: 4px 10px; border-radius: 4px; }

        /* Mobile: canvas at very top, controls below */
        @media (hover: none) and (pointer: coarse) {
            body {
                display: block !important;
                padding: 0 !important;
                margin: 0 !important;
                text-align: center;
            }
            canvas {
                border: none !important;
                border-radius: 0 !important;
                display: block !important;
                margin: 0 auto !important;
            }
        }
    </style>
</head>
<body>
    <div id="loading-msg">
        <h2>Loading Super MAGA Bros...</h2>
        <p>If this message doesn't disappear, serve the folder locally:</p>
        <p style="margin-top:8px"><code>npx serve .</code></p>
    </div>
    <script>
        window.addEventListener('error', function(e) {
            if (e.target && e.target.tagName === 'SCRIPT') {
                document.getElementById('loading-msg').innerHTML =
                    '<h2 style="color:#CC2222">Failed to load Phaser.js</h2>' +
                    '<p>Check your internet connection, or serve locally:</p>' +
                    '<p style="margin-top:8px"><code>npx serve .</code></p>';
            }
        }, true);
    </script>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.60.0/dist/phaser.min.js"></script>
    <script>
        // Hide loading message once Phaser is ready
        if (typeof Phaser !== 'undefined') {
            document.getElementById('loading-msg').style.display = 'none';
        }
    </script>
    <script src="game.js?v=20260226z3"></script>

    <!-- Touch controls overlay (hidden on desktop) — SNES-themed -->
    <div id="touch-controls" style="
        display: none;
        position: fixed;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 36%;
        pointer-events: none;
        z-index: 9999;
        user-select: none;
        -webkit-user-select: none;
        background:
          repeating-linear-gradient(0deg, transparent, transparent 3px, rgba(0,0,0,0.03) 3px, rgba(0,0,0,0.03) 4px),
          repeating-linear-gradient(90deg, transparent, transparent 3px, rgba(0,0,0,0.03) 3px, rgba(0,0,0,0.03) 4px),
          linear-gradient(180deg, #9494a8 0%, #7e7e92 6%, #6a6a7e 50%, #5e5e72 100%);
        border-top: 3px solid #aaaabc;
        box-shadow: inset 0 2px 6px rgba(255,255,255,0.18), inset 0 -6px 12px rgba(0,0,0,0.25), 0 -2px 8px rgba(0,0,0,0.3);
    ">
      <!-- Top highlight ridge (SNES controller seam) -->
      <div style="
          position:absolute; top:0; left:0; width:100%; height:4px;
          background: linear-gradient(180deg, rgba(255,255,255,0.12), transparent);
          pointer-events:none;
      "></div>

      <!-- Left grip area (D-pad well) -->
      <div style="
          position:absolute; left:3%; bottom:8px;
          width:46%; height:calc(100% - 30px); border-radius:18px;
          background: linear-gradient(180deg, rgba(0,0,0,0.08), rgba(0,0,0,0.18));
          border: 1px solid rgba(0,0,0,0.15);
          box-shadow: inset 0 2px 8px rgba(0,0,0,0.25), inset 0 -1px 0 rgba(255,255,255,0.06);
          pointer-events:none;
      "></div>

      <!-- Right grip area (action button well) -->
      <div style="
          position:absolute; right:3%; bottom:8px;
          width:46%; height:calc(100% - 30px); border-radius:18px;
          background: linear-gradient(180deg, rgba(0,0,0,0.08), rgba(0,0,0,0.18));
          border: 1px solid rgba(0,0,0,0.15);
          box-shadow: inset 0 2px 8px rgba(0,0,0,0.25), inset 0 -1px 0 rgba(255,255,255,0.06);
          pointer-events:none;
      "></div>

      <!-- Center label -->
      <div style="
          position:absolute; left:50%; top:6px;
          transform:translateX(-50%);
          font-family: 'Arial Black', sans-serif;
          font-size:9px; letter-spacing:3px;
          color:rgba(255,255,255,0.2);
          text-transform:uppercase; white-space:nowrap;
          pointer-events:none;
      ">Super MAGA Bros</div>

      <!-- Decorative screw dots (SNES detail) -->
      <div style="position:absolute;left:8px;top:8px;width:6px;height:6px;border-radius:50%;background:rgba(0,0,0,0.2);box-shadow:inset 0 1px 1px rgba(255,255,255,0.1);pointer-events:none;"></div>
      <div style="position:absolute;right:8px;top:8px;width:6px;height:6px;border-radius:50%;background:rgba(0,0,0,0.2);box-shadow:inset 0 1px 1px rgba(255,255,255,0.1);pointer-events:none;"></div>

      <!-- D-PAD: left side — percentage-based positioning -->
      <div id="btn-left" style="
          position:absolute; left:6%; bottom:calc(50% - 36px);
          width:64px; height:64px; border-radius:50%;
          background: linear-gradient(145deg, #505060, #38384a);
          border:2px solid rgba(255,255,255,0.08);
          box-shadow: inset 0 1px 2px rgba(255,255,255,0.12), 0 4px 8px rgba(0,0,0,0.5), 0 1px 2px rgba(0,0,0,0.3);
          display:flex; align-items:center; justify-content:center;
          font-size:26px; color:rgba(255,255,255,0.6); pointer-events:all;
          touch-action:none;
      ">&#9664;</div>

      <div id="btn-right" style="
          position:absolute; left:calc(6% + 76px); bottom:calc(50% - 36px);
          width:64px; height:64px; border-radius:50%;
          background: linear-gradient(145deg, #505060, #38384a);
          border:2px solid rgba(255,255,255,0.08);
          box-shadow: inset 0 1px 2px rgba(255,255,255,0.12), 0 4px 8px rgba(0,0,0,0.5), 0 1px 2px rgba(0,0,0,0.3);
          display:flex; align-items:center; justify-content:center;
          font-size:26px; color:rgba(255,255,255,0.6); pointer-events:all;
          touch-action:none;
      ">&#9654;</div>

      <!-- ACTION BUTTONS: right side — diamond layout like SNES A/B/X/Y -->
      <div id="btn-jump" style="
          position:absolute; right:6%; bottom:calc(50% - 38px);
          width:72px; height:72px; border-radius:50%;
          background: linear-gradient(145deg, #dd4455, #992233);
          border:2px solid rgba(255,150,160,0.3);
          box-shadow: inset 0 2px 4px rgba(255,255,255,0.25), inset 0 -2px 4px rgba(0,0,0,0.2), 0 4px 8px rgba(0,0,0,0.5);
          display:flex; align-items:center; justify-content:center;
          font-size:12px; font-weight:bold; color:rgba(255,255,255,0.9);
          pointer-events:all; touch-action:none;
          font-family: 'Arial Black', sans-serif;
          text-shadow: 0 1px 2px rgba(0,0,0,0.5);
      ">JUMP</div>

      <div id="btn-tweet" style="
          position:absolute; right:calc(6% + 82px); bottom:calc(50% - 32px);
          width:60px; height:60px; border-radius:50%;
          background: linear-gradient(145deg, #2299ee, #1566aa);
          border:2px solid rgba(100,180,255,0.3);
          box-shadow: inset 0 2px 4px rgba(255,255,255,0.25), inset 0 -2px 4px rgba(0,0,0,0.2), 0 4px 8px rgba(0,0,0,0.5);
          display:flex; align-items:center; justify-content:center;
          font-size:9px; font-weight:bold; color:rgba(255,255,255,0.9);
          pointer-events:all; touch-action:none;
          font-family: 'Arial Black', sans-serif;
          text-shadow: 0 1px 2px rgba(0,0,0,0.5);
      ">TWEET</div>

      <div id="btn-shart" style="
          position:absolute; right:calc(6% + 36px); bottom:calc(50% + 30px);
          width:54px; height:54px; border-radius:50%;
          background: linear-gradient(145deg, #aa6622, #6e4010);
          border:2px solid rgba(200,140,80,0.3);
          box-shadow: inset 0 2px 4px rgba(255,255,255,0.25), inset 0 -2px 4px rgba(0,0,0,0.2), 0 4px 8px rgba(0,0,0,0.5);
          display:flex; align-items:center; justify-content:center;
          font-size:8px; font-weight:bold; color:rgba(255,255,255,0.9);
          pointer-events:all; touch-action:none;
          font-family: 'Arial Black', sans-serif;
          text-shadow: 0 1px 2px rgba(0,0,0,0.5);
      ">SHART</div>
    </div>

    <script>
    (function() {
        // Touch state flags — read by the game via window.TOUCH
        window.TOUCH = {
            left: false, right: false, jump: false, tweet: false, shart: false
        };

        // Show controls only on touch devices
        function initTouch() {
            var el = document.getElementById('touch-controls');
            if (!el) return;
            el.style.display = 'block';

            function bind(id, key) {
                var btn = document.getElementById(id);
                if (!btn) return;
                btn.addEventListener('touchstart', function(e) {
                    e.preventDefault();
                    window.TOUCH[key] = true;
                }, { passive: false });
                btn.addEventListener('touchend', function(e) {
                    e.preventDefault();
                    window.TOUCH[key] = false;
                }, { passive: false });
                btn.addEventListener('touchcancel', function(e) {
                    e.preventDefault();
                    window.TOUCH[key] = false;
                }, { passive: false });
            }

            bind('btn-left',  'left');
            bind('btn-right', 'right');
            bind('btn-jump',  'jump');
            bind('btn-tweet', 'tweet');
            bind('btn-shart', 'shart');
        }

        // Init immediately if touch is detected, or on first touch
        if ('ontouchstart' in window || navigator.maxTouchPoints > 0) {
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', initTouch);
            } else {
                initTouch();
            }
        }
    })();
    </script>
</body>
</html>
