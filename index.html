<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Super MAGA Bros.</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            background: #0a0a2e;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            height: 100dvh;
            overflow: hidden;
            font-family: Arial, sans-serif;
            color: white;
            margin: 0;
            padding: 0;
            -webkit-touch-callout: none;
        }
        canvas {
            image-rendering: pixelated;
            image-rendering: crisp-edges;
            border: 3px solid #FFD700;
            border-radius: 4px;
            display: block;
            touch-action: none;
        }
        #loading-msg {
            text-align: center;
            position: absolute;
        }
        #loading-msg h2 { color: #FFD700; margin-bottom: 12px; }
        #loading-msg code { background: #222; padding: 4px 10px; border-radius: 4px; }

        /* Mobile: canvas at very top, controls below */
        @media (hover: none) and (pointer: coarse) {
            body {
                display: block !important;
                padding: 0 !important;
                margin: 0 !important;
                text-align: center;
            }
            canvas {
                border: none !important;
                border-radius: 0 !important;
                display: block !important;
                margin: 0 auto !important;
            }
        }
    </style>
</head>
<body>
    <div id="loading-msg">
        <h2>Loading Super MAGA Bros...</h2>
        <p>If this message doesn't disappear, serve the folder locally:</p>
        <p style="margin-top:8px"><code>npx serve .</code></p>
    </div>
    <script>
        window.addEventListener('error', function(e) {
            if (e.target && e.target.tagName === 'SCRIPT') {
                document.getElementById('loading-msg').innerHTML =
                    '<h2 style="color:#CC2222">Failed to load Phaser.js</h2>' +
                    '<p>Check your internet connection, or serve locally:</p>' +
                    '<p style="margin-top:8px"><code>npx serve .</code></p>';
            }
        }, true);
    </script>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.60.0/dist/phaser.min.js"></script>
    <script>
        // Hide loading message once Phaser is ready
        if (typeof Phaser !== 'undefined') {
            document.getElementById('loading-msg').style.display = 'none';
        }
    </script>
    <script src="game.js?v=20260226z3"></script>

    <!-- Touch controls overlay (hidden on desktop) — SNES-themed -->
    <div id="touch-controls" style="
        display: none;
        position: fixed;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 44%;
        pointer-events: none;
        z-index: 9999;
        user-select: none;
        -webkit-user-select: none;
        background: linear-gradient(180deg, #8e8ea0 0%, #7a7a8c 8%, #6e6e80 100%);
        border-top: 3px solid #a0a0b4;
        box-shadow: inset 0 2px 4px rgba(255,255,255,0.15), inset 0 -4px 8px rgba(0,0,0,0.3);
    ">
      <!-- Top highlight ridge (SNES controller seam) -->
      <div style="
          position:absolute; top:3px; left:10%; width:80%; height:2px;
          background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
          border-radius:1px;
      "></div>

      <!-- Left grip area (D-pad well) -->
      <div style="
          position:absolute; left:8px; bottom:10px;
          width:180px; height:110px; border-radius:16px;
          background: rgba(0,0,0,0.15);
          box-shadow: inset 0 2px 6px rgba(0,0,0,0.3), 0 1px 0 rgba(255,255,255,0.08);
          pointer-events:none;
      "></div>

      <!-- Right grip area (action button well) -->
      <div style="
          position:absolute; right:8px; bottom:10px;
          width:210px; height:150px; border-radius:16px;
          background: rgba(0,0,0,0.15);
          box-shadow: inset 0 2px 6px rgba(0,0,0,0.3), 0 1px 0 rgba(255,255,255,0.08);
          pointer-events:none;
      "></div>

      <!-- Center label -->
      <div style="
          position:absolute; left:50%; top:8px;
          transform:translateX(-50%);
          font-family: 'Arial Black', sans-serif;
          font-size:10px; letter-spacing:2px;
          color:rgba(255,255,255,0.25);
          text-transform:uppercase;
          pointer-events:none;
      ">Super MAGA Bros</div>

      <!-- D-PAD: left side -->
      <div id="btn-left" style="
          position:absolute; left:20px; bottom:30px;
          width:72px; height:72px; border-radius:50%;
          background: linear-gradient(145deg, #4a4a54, #333340);
          border:2px solid #555566;
          box-shadow: inset 0 1px 2px rgba(255,255,255,0.1), 0 3px 6px rgba(0,0,0,0.4);
          display:flex; align-items:center; justify-content:center;
          font-size:28px; color:rgba(255,255,255,0.7); pointer-events:all;
          touch-action:none;
      ">&#9664;</div>

      <div id="btn-right" style="
          position:absolute; left:108px; bottom:30px;
          width:72px; height:72px; border-radius:50%;
          background: linear-gradient(145deg, #4a4a54, #333340);
          border:2px solid #555566;
          box-shadow: inset 0 1px 2px rgba(255,255,255,0.1), 0 3px 6px rgba(0,0,0,0.4);
          display:flex; align-items:center; justify-content:center;
          font-size:28px; color:rgba(255,255,255,0.7); pointer-events:all;
          touch-action:none;
      ">&#9654;</div>

      <!-- ACTION BUTTONS: right side (SNES-style colored) -->
      <div id="btn-jump" style="
          position:absolute; right:20px; bottom:28px;
          width:80px; height:80px; border-radius:50%;
          background: linear-gradient(145deg, #dd4455, #aa2233);
          border:2px solid #ee6677;
          box-shadow: inset 0 2px 3px rgba(255,255,255,0.2), 0 3px 6px rgba(0,0,0,0.4);
          display:flex; align-items:center; justify-content:center;
          font-size:13px; font-weight:bold; color:rgba(255,255,255,0.9);
          pointer-events:all; touch-action:none;
          font-family: 'Arial Black', sans-serif;
          text-shadow: 0 1px 2px rgba(0,0,0,0.4);
      ">JUMP</div>

      <div id="btn-tweet" style="
          position:absolute; right:116px; bottom:36px;
          width:68px; height:68px; border-radius:50%;
          background: linear-gradient(145deg, #2299ee, #1a77cc);
          border:2px solid #44aaff;
          box-shadow: inset 0 2px 3px rgba(255,255,255,0.2), 0 3px 6px rgba(0,0,0,0.4);
          display:flex; align-items:center; justify-content:center;
          font-size:10px; font-weight:bold; color:rgba(255,255,255,0.9);
          pointer-events:all; touch-action:none;
          font-family: 'Arial Black', sans-serif;
          text-shadow: 0 1px 2px rgba(0,0,0,0.4);
      ">TWEET</div>

      <div id="btn-shart" style="
          position:absolute; right:96px; bottom:112px;
          width:60px; height:60px; border-radius:50%;
          background: linear-gradient(145deg, #aa6622, #774400);
          border:2px solid #cc8844;
          box-shadow: inset 0 2px 3px rgba(255,255,255,0.2), 0 3px 6px rgba(0,0,0,0.4);
          display:flex; align-items:center; justify-content:center;
          font-size:9px; font-weight:bold; color:rgba(255,255,255,0.9);
          pointer-events:all; touch-action:none;
          font-family: 'Arial Black', sans-serif;
          text-shadow: 0 1px 2px rgba(0,0,0,0.4);
      ">SHART</div>
    </div>

    <script>
    (function() {
        // Touch state flags — read by the game via window.TOUCH
        window.TOUCH = {
            left: false, right: false, jump: false, tweet: false, shart: false
        };

        // Show controls only on touch devices
        function initTouch() {
            var el = document.getElementById('touch-controls');
            if (!el) return;
            el.style.display = 'block';

            function bind(id, key) {
                var btn = document.getElementById(id);
                if (!btn) return;
                btn.addEventListener('touchstart', function(e) {
                    e.preventDefault();
                    window.TOUCH[key] = true;
                }, { passive: false });
                btn.addEventListener('touchend', function(e) {
                    e.preventDefault();
                    window.TOUCH[key] = false;
                }, { passive: false });
                btn.addEventListener('touchcancel', function(e) {
                    e.preventDefault();
                    window.TOUCH[key] = false;
                }, { passive: false });
            }

            bind('btn-left',  'left');
            bind('btn-right', 'right');
            bind('btn-jump',  'jump');
            bind('btn-tweet', 'tweet');
            bind('btn-shart', 'shart');
        }

        // Init immediately if touch is detected, or on first touch
        if ('ontouchstart' in window || navigator.maxTouchPoints > 0) {
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', initTouch);
            } else {
                initTouch();
            }
        }
    })();
    </script>
</body>
</html>
