<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Super MAGA Bros.</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            background: #0a0a2e;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            height: 100dvh;
            overflow: hidden;
            font-family: Arial, sans-serif;
            color: white;
            margin: 0;
            padding: 0;
            -webkit-touch-callout: none;
        }
        canvas {
            image-rendering: pixelated;
            image-rendering: crisp-edges;
            border: 3px solid #FFD700;
            border-radius: 4px;
            display: block;
            touch-action: none;
        }
        #loading-msg {
            text-align: center;
            position: absolute;
        }
        #loading-msg h2 { color: #FFD700; margin-bottom: 12px; }
        #loading-msg code { background: #222; padding: 4px 10px; border-radius: 4px; }

        /* Mobile: canvas at very top, controls below */
        @media (hover: none) and (pointer: coarse) {
            body {
                display: block !important;
                padding: 0 !important;
                margin: 0 !important;
                text-align: center;
            }
            canvas {
                border: none !important;
                border-radius: 0 !important;
                display: block !important;
                margin: 0 auto !important;
            }
        }
    </style>
</head>
<body>
    <div id="loading-msg">
        <h2>Loading Super MAGA Bros...</h2>
        <p>If this message doesn't disappear, serve the folder locally:</p>
        <p style="margin-top:8px"><code>npx serve .</code></p>
    </div>
    <script>
        window.addEventListener('error', function(e) {
            if (e.target && e.target.tagName === 'SCRIPT') {
                document.getElementById('loading-msg').innerHTML =
                    '<h2 style="color:#CC2222">Failed to load Phaser.js</h2>' +
                    '<p>Check your internet connection, or serve locally:</p>' +
                    '<p style="margin-top:8px"><code>npx serve .</code></p>';
            }
        }, true);
    </script>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.60.0/dist/phaser.min.js"></script>
    <script>
        // Hide loading message once Phaser is ready
        if (typeof Phaser !== 'undefined') {
            document.getElementById('loading-msg').style.display = 'none';
        }
    </script>
    <script src="game.js?v=20260226z3"></script>

    <!-- Touch controls overlay (hidden on desktop) — SNES-themed -->
    <div id="touch-controls" style="
        display: none;
        position: fixed;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 36%;
        pointer-events: none;
        z-index: 9999;
        user-select: none;
        -webkit-user-select: none;
        background:
          radial-gradient(circle, rgba(0,0,0,0.05) 1px, transparent 1px),
          repeating-linear-gradient(0deg, transparent, transparent 3px, rgba(0,0,0,0.02) 3px, rgba(0,0,0,0.02) 4px),
          repeating-linear-gradient(90deg, transparent, transparent 3px, rgba(0,0,0,0.02) 3px, rgba(0,0,0,0.02) 4px),
          repeating-linear-gradient(180deg, transparent, transparent 38px, rgba(0,0,0,0.04) 38px, rgba(0,0,0,0.04) 40px),
          linear-gradient(180deg, #a0a0b4 0%, #8e8ea2 6%, #7a7a8e 40%, #686878 70%, #5a5a6e 100%);
        background-size: 6px 6px, auto, auto, auto, auto;
        border-top: 3px solid #b0b0c4;
        box-shadow: inset 0 2px 8px rgba(255,255,255,0.22), inset 0 -8px 16px rgba(0,0,0,0.3), 0 -3px 10px rgba(0,0,0,0.35);
    ">
      <!-- Top highlight ridge -->
      <div style="
          position:absolute; top:0; left:0; width:100%; height:6px;
          background: linear-gradient(180deg, rgba(255,255,255,0.15), rgba(255,255,255,0.04) 60%, transparent);
          pointer-events:none;
      "></div>
      <!-- Dark seam line below ridge -->
      <div style="
          position:absolute; top:6px; left:0; width:100%; height:2px;
          background: rgba(0,0,0,0.12);
          pointer-events:none;
      "></div>
      <!-- SNES color stripe -->
      <div style="
          position:absolute; top:8px; left:0; width:100%; height:3px;
          background: linear-gradient(90deg,
            transparent 15%, #cc3344 15%, #cc3344 30%,
            #2266bb 30%, #2266bb 45%,
            #44aa44 45%, #44aa44 60%,
            #ccaa22 60%, #ccaa22 75%,
            transparent 75%);
          opacity: 0.35;
          pointer-events:none;
      "></div>

      <!-- Left grip area (D-pad well) -->
      <div style="
          position:absolute; left:3%; bottom:8px;
          width:46%; height:calc(100% - 34px); border-radius:22px;
          background:
            repeating-linear-gradient(45deg, transparent, transparent 4px, rgba(0,0,0,0.03) 4px, rgba(0,0,0,0.03) 5px),
            repeating-linear-gradient(-45deg, transparent, transparent 4px, rgba(0,0,0,0.03) 4px, rgba(0,0,0,0.03) 5px),
            linear-gradient(180deg, rgba(0,0,0,0.10), rgba(0,0,0,0.22));
          border: 1px solid rgba(0,0,0,0.18);
          box-shadow: inset 0 3px 10px rgba(0,0,0,0.30), inset 0 -2px 4px rgba(0,0,0,0.10), inset 0 0 0 1px rgba(255,255,255,0.04), 0 1px 0 rgba(255,255,255,0.06);
          pointer-events:none;
      "></div>

      <!-- Right grip area (action button well) -->
      <div style="
          position:absolute; right:3%; bottom:8px;
          width:46%; height:calc(100% - 34px); border-radius:22px;
          background:
            repeating-linear-gradient(45deg, transparent, transparent 4px, rgba(0,0,0,0.03) 4px, rgba(0,0,0,0.03) 5px),
            repeating-linear-gradient(-45deg, transparent, transparent 4px, rgba(0,0,0,0.03) 4px, rgba(0,0,0,0.03) 5px),
            linear-gradient(180deg, rgba(0,0,0,0.10), rgba(0,0,0,0.22));
          border: 1px solid rgba(0,0,0,0.18);
          box-shadow: inset 0 3px 10px rgba(0,0,0,0.30), inset 0 -2px 4px rgba(0,0,0,0.10), inset 0 0 0 1px rgba(255,255,255,0.04), 0 1px 0 rgba(255,255,255,0.06);
          pointer-events:none;
      "></div>

      <!-- Center label -->
      <div style="
          position:absolute; left:50%; top:14px;
          transform:translateX(-50%);
          font-family: 'Arial Black', sans-serif;
          font-size:9px; letter-spacing:4px;
          color:rgba(255,255,255,0.18);
          text-transform:uppercase; white-space:nowrap;
          pointer-events:none;
      ">Super MAGA Bros</div>

      <!-- Decorative screw dots (4 corners) -->
      <div style="position:absolute;left:10px;top:10px;width:10px;height:10px;border-radius:50%;background:radial-gradient(circle,#606068 2px,#50505a 3px,#45454f 5px);box-shadow:inset 0 1px 2px rgba(255,255,255,0.18),inset 0 -1px 1px rgba(0,0,0,0.3),0 1px 2px rgba(0,0,0,0.25);pointer-events:none;"></div>
      <div style="position:absolute;right:10px;top:10px;width:10px;height:10px;border-radius:50%;background:radial-gradient(circle,#606068 2px,#50505a 3px,#45454f 5px);box-shadow:inset 0 1px 2px rgba(255,255,255,0.18),inset 0 -1px 1px rgba(0,0,0,0.3),0 1px 2px rgba(0,0,0,0.25);pointer-events:none;"></div>
      <div style="position:absolute;left:10px;bottom:10px;width:10px;height:10px;border-radius:50%;background:radial-gradient(circle,#606068 2px,#50505a 3px,#45454f 5px);box-shadow:inset 0 1px 2px rgba(255,255,255,0.18),inset 0 -1px 1px rgba(0,0,0,0.3),0 1px 2px rgba(0,0,0,0.25);pointer-events:none;"></div>
      <div style="position:absolute;right:10px;bottom:10px;width:10px;height:10px;border-radius:50%;background:radial-gradient(circle,#606068 2px,#50505a 3px,#45454f 5px);box-shadow:inset 0 1px 2px rgba(255,255,255,0.18),inset 0 -1px 1px rgba(0,0,0,0.3),0 1px 2px rgba(0,0,0,0.25);pointer-events:none;"></div>
      <!-- Screw cross slots (overlaid on corner screws) -->
      <div style="position:absolute;left:14px;top:10px;width:2px;height:10px;background:rgba(0,0,0,0.3);pointer-events:none;"></div>
      <div style="position:absolute;left:10px;top:14px;width:10px;height:2px;background:rgba(0,0,0,0.3);pointer-events:none;"></div>
      <div style="position:absolute;right:10px;top:10px;width:2px;height:10px;background:rgba(0,0,0,0.3);pointer-events:none;margin-right:4px;"></div>
      <div style="position:absolute;right:10px;top:14px;width:10px;height:2px;background:rgba(0,0,0,0.3);pointer-events:none;"></div>

      <!-- D-PAD: left side — centered within left grip well -->
      <div id="btn-left" style="
          position:absolute; left:calc(26% - 72px); bottom:calc(50% - 32px);
          width:64px; height:64px; border-radius:50%;
          background: linear-gradient(145deg, #555566, #3a3a4c);
          border:2px solid rgba(255,255,255,0.06);
          box-shadow: inset 0 1px 3px rgba(255,255,255,0.15), inset 0 -2px 3px rgba(0,0,0,0.2), 0 0 0 3px rgba(0,0,0,0.15), 0 4px 10px rgba(0,0,0,0.5);
          display:flex; align-items:center; justify-content:center;
          font-size:26px; color:rgba(255,255,255,0.55); pointer-events:all;
          touch-action:none; transition: transform 0.06s, box-shadow 0.06s;
      ">&#9664;</div>

      <div id="btn-right" style="
          position:absolute; left:calc(26% + 8px); bottom:calc(50% - 32px);
          width:64px; height:64px; border-radius:50%;
          background: linear-gradient(145deg, #555566, #3a3a4c);
          border:2px solid rgba(255,255,255,0.06);
          box-shadow: inset 0 1px 3px rgba(255,255,255,0.15), inset 0 -2px 3px rgba(0,0,0,0.2), 0 0 0 3px rgba(0,0,0,0.15), 0 4px 10px rgba(0,0,0,0.5);
          display:flex; align-items:center; justify-content:center;
          font-size:26px; color:rgba(255,255,255,0.55); pointer-events:all;
          touch-action:none; transition: transform 0.06s, box-shadow 0.06s;
      ">&#9654;</div>

      <!-- ACTION BUTTONS: right side — SNES diamond centered in right grip well -->
      <!-- Right grip center = right:26%. Diamond: A=right, B=left, X=top -->
      <div id="btn-jump" style="
          position:absolute; right:calc(26% - 42px); bottom:calc(50% - 42px);
          width:72px; height:72px; border-radius:50%;
          background: radial-gradient(circle at 35% 35%, #ee5566, #cc3344 40%, #992233);
          border:2px solid rgba(255,150,160,0.25);
          box-shadow: inset 0 2px 5px rgba(255,255,255,0.30), inset 0 -3px 5px rgba(0,0,0,0.25), 0 0 0 3px rgba(0,0,0,0.15), 0 5px 10px rgba(0,0,0,0.5);
          display:flex; flex-direction:column; align-items:center; justify-content:center; gap:1px;
          font-size:11px; font-weight:bold; color:rgba(255,255,255,0.92);
          pointer-events:all; touch-action:none;
          font-family: 'Arial Black', sans-serif;
          text-shadow: 0 1px 2px rgba(0,0,0,0.5);
          transition: transform 0.06s, box-shadow 0.06s;
      "><span>JUMP</span><span style="font-size:7px;opacity:0.4;margin-top:-1px;">A</span></div>

      <div id="btn-tweet" style="
          position:absolute; right:calc(26% + 26px); bottom:calc(50% - 36px);
          width:62px; height:62px; border-radius:50%;
          background: radial-gradient(circle at 35% 35%, #33aaff, #2299ee 40%, #1566aa);
          border:2px solid rgba(100,180,255,0.25);
          box-shadow: inset 0 2px 5px rgba(255,255,255,0.30), inset 0 -3px 5px rgba(0,0,0,0.25), 0 0 0 3px rgba(0,0,0,0.15), 0 5px 10px rgba(0,0,0,0.5);
          display:flex; flex-direction:column; align-items:center; justify-content:center; gap:1px;
          font-size:9px; font-weight:bold; color:rgba(255,255,255,0.92);
          pointer-events:all; touch-action:none;
          font-family: 'Arial Black', sans-serif;
          text-shadow: 0 1px 2px rgba(0,0,0,0.5);
          transition: transform 0.06s, box-shadow 0.06s;
      "><span>TWEET</span><span style="font-size:7px;opacity:0.4;margin-top:-1px;">B</span></div>

      <div id="btn-shart" style="
          position:absolute; right:calc(26% - 6px); bottom:calc(50% + 24px);
          width:56px; height:56px; border-radius:50%;
          background: radial-gradient(circle at 35% 35%, #cc7733, #aa6622 40%, #6e4010);
          border:2px solid rgba(200,140,80,0.25);
          box-shadow: inset 0 2px 5px rgba(255,255,255,0.30), inset 0 -3px 5px rgba(0,0,0,0.25), 0 0 0 3px rgba(0,0,0,0.15), 0 5px 10px rgba(0,0,0,0.5);
          display:flex; flex-direction:column; align-items:center; justify-content:center; gap:1px;
          font-size:8px; font-weight:bold; color:rgba(255,255,255,0.92);
          pointer-events:all; touch-action:none;
          font-family: 'Arial Black', sans-serif;
          text-shadow: 0 1px 2px rgba(0,0,0,0.5);
          transition: transform 0.06s, box-shadow 0.06s;
      "><span>SHART</span><span style="font-size:7px;opacity:0.4;margin-top:-1px;">X</span></div>
    </div>

    <script>
    (function() {
        // Touch state flags — read by the game via window.TOUCH
        window.TOUCH = {
            left: false, right: false, jump: false, tweet: false, shart: false
        };

        // Show controls only on touch devices
        function initTouch() {
            var el = document.getElementById('touch-controls');
            if (!el) return;
            el.style.display = 'block';

            function bind(id, key) {
                var btn = document.getElementById(id);
                if (!btn) return;
                btn.addEventListener('touchstart', function(e) {
                    e.preventDefault();
                    window.TOUCH[key] = true;
                    btn.style.transform = 'scale(0.90)';
                    btn.style.boxShadow = 'inset 0 3px 8px rgba(0,0,0,0.5), 0 0 0 3px rgba(0,0,0,0.15), 0 1px 3px rgba(0,0,0,0.4)';
                }, { passive: false });
                btn.addEventListener('touchend', function(e) {
                    e.preventDefault();
                    window.TOUCH[key] = false;
                    btn.style.transform = '';
                    btn.style.boxShadow = '';
                }, { passive: false });
                btn.addEventListener('touchcancel', function(e) {
                    e.preventDefault();
                    window.TOUCH[key] = false;
                    btn.style.transform = '';
                    btn.style.boxShadow = '';
                }, { passive: false });
            }

            bind('btn-left',  'left');
            bind('btn-right', 'right');
            bind('btn-jump',  'jump');
            bind('btn-tweet', 'tweet');
            bind('btn-shart', 'shart');
        }

        // Init immediately if touch is detected, or on first touch
        if ('ontouchstart' in window || navigator.maxTouchPoints > 0) {
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', initTouch);
            } else {
                initTouch();
            }
        }
    })();
    </script>
</body>
</html>
